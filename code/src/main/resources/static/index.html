<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="jquery-3.3.1.min.js" type="application/javascript"></script>
<script type="application/javascript">
    (function ($) {
        'use strict';
        function getParameter(name) {
            var query = window.location.search;
            var iLen = name.length;
            var iStart = query.indexOf(name);
            if (iStart == -1)
                return "";
            iStart += iLen + 1;
            var iEnd = query.indexOf("&", iStart);
            if (iEnd == -1)
                return query.substring(iStart);
            return query.substring(iStart, iEnd);
        }
        var code = getParameter('code');
        var source = getParameter('source');
        if (code){
            console.log("code="+code);
            $.ajax({
                type: 'GET',
                async: true,
                url: "/account/auth?code"+code,
                success: function(data){
                    console.log(data);
                }
            });
        }else{
            var callbackUrl = 'https://www.tattooju.com/index.html?source=';
            var appid = 'wxb18ce3e6d926910f';
            var redirect_uri = encodeURI(callbackUrl);
            window.location.href = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + appid + '&redirect_uri=' + redirect_uri + source + '&Foauth_response.php&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect';
        }
    })(jQuery);
</script>
<body>
index
</body>
</html>